{"version":3,"file":"login.bundle.js","sources":["../pages/login.js"],"sourcesContent":["// Page elements\r\nconst e_formLogin         = $('#form-login');\r\nconst e_inputEmail        = $('#form-login-email');\r\nconst e_inputPassword     = $('#form-login-password');\r\nconst e_btnSubmit         = $('#form-login-submit');\r\n\r\n\r\n/**********************************************************\r\nMain logic\r\n**********************************************************/\r\n$(document).ready(function() {\r\n    addListeners();\r\n});\r\n\r\n\r\n/**********************************************************\r\nAdd all the event listeners to the page\r\n**********************************************************/\r\nfunction addListeners() {\r\n    $(e_btnSubmit).on('click', attemptLogin);\r\n\r\n    $('.form-control').on('keypress', function(e) {\r\n        if (e.keyCode == 13) {\r\n            e.preventDefault();\r\n            attemptLogin();\r\n        }\r\n    });\r\n\r\n    $(e_formLogin).find('.form-control').on('keypress', clearInvalidInputClass);\r\n}\r\n\r\n/**********************************************************\r\nAttempt to login \r\n**********************************************************/\r\nfunction attemptLogin() {\r\n    disableSubmitButton();\r\n\r\n    // ensure all the input fields are valid \r\n    if (!Utilities.validateForm(e_formLogin)) {\r\n        enableSubmitButton();\r\n        return;\r\n    }\r\n\r\n    let inputValues = getInputValues();\r\n    // ApiWrapper.requestLogin(inputValues, loginSuccess, loginError);\r\n    ApiWrapper.requestLogin(inputValues, loginSuccess, loginError);\r\n}\r\n\r\n/**********************************************************\r\nDisables the submit button. Waiting for API response\r\n**********************************************************/\r\nfunction disableSubmitButton() {\r\n    $(e_btnSubmit).html(CommonHtml.spinnerSmall);\r\n    $(e_btnSubmit).prop('disabled', true);\r\n}\r\n\r\n/**********************************************************\r\nEnables the submit button\r\n**********************************************************/\r\nfunction enableSubmitButton() {\r\n    $(e_btnSubmit).html('Log in').prop('disabled', false);\r\n}\r\n\r\n/**********************************************************\r\nReturns the form input values\r\n**********************************************************/\r\nfunction getInputValues() {\r\n    const values = {};\r\n    values.email      = $(e_inputEmail).val();\r\n    values.password   = $(e_inputPassword).val();\r\n\r\n    return values;\r\n}\r\n\r\n/**********************************************************\r\nActions to take when the user successfully logged in\r\n**********************************************************/\r\nfunction loginSuccess(result,status,xhr) {\r\n    // enableSubmitButton();\r\n\r\n    // go to the home page\r\n    window.location.href = window.location.origin;\r\n}\r\n\r\n/**********************************************************\r\nActions to take when the user unsuccessfully tried to log in\r\n**********************************************************/\r\nfunction loginError(xhr, status, error) {\r\n    console.error(xhr);\r\n    console.error(status);\r\n    console.error(error);\r\n\r\n    enableSubmitButton();\r\n    Utilities.displayAlert('Invalid login credentials.');\r\n\r\n    $(e_inputPassword).val('');\r\n    $(e_formLogin).find('.form-control').addClass('is-invalid');\r\n}\r\n\r\n/**********************************************************\r\nClear the invalid input classes\r\n**********************************************************/\r\nfunction clearInvalidInputClass() {\r\n    $(e_formLogin).find('.form-control').removeClass('is-invalid');\r\n}\r\n"],"names":[],"mappings":"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"}