{"version":3,"file":"products-requests.bundle.js","sources":["../pages/products/requests.js"],"sourcesContent":["\r\nconst eRequestButtons = '.product-request-btn'\r\nconst eProductRequestClass = '.product-request';\r\nconst eStatusDropdown = '.dropdown-status';\r\n\r\nconst STATUS_FILTERS = {\r\n    All: 'all',\r\n    Accepted: 'accepted',\r\n    Denied: 'denied',\r\n    Expired: 'expired',\r\n    Pending: 'pending',\r\n}\r\n\r\n\r\n\r\n/************************************************\r\nMain logic.\r\n*************************************************/\r\n$(document).ready(function() {\r\n    $('#products-sidenav-link-requests').addClass('active');\r\n    setActiveStatusDropdownOption();\r\n    addEventListeners();\r\n});\r\n\r\n\r\n/************************************************\r\nRegisters all the event listeners to the html \r\nelements on the page.\r\n*************************************************/\r\nfunction addEventListeners() {\r\n    $(eRequestButtons).on('click', function() {\r\n        sendRequestResponse(this);\r\n    });\r\n}\r\n\r\n\r\n/************************************************\r\nAction event listener for hitting the accept button.\r\n*************************************************/\r\nasync function sendRequestResponse(responseButtonClicked) {\r\n\r\n    // disable the clicked button\r\n    const originalText = $(responseButtonClicked).text();\r\n    const spinningBtn = new SpinnerButton(responseButtonClicked, originalText);\r\n    spinningBtn.showSpinner();\r\n\r\n    // send the request to the api\r\n    const requestID = $(responseButtonClicked).closest(eProductRequestClass).attr('data-request-id');\r\n    const status = $(responseButtonClicked).attr('data-status-value');\r\n    let apiResponse = ApiWrapper.requestPostProductRequestResponse(requestID, status);\r\n    apiResponse = await Promise.resolve(apiResponse);\r\n\r\n    \r\n    if (apiResponse.ok) {\r\n        // refresh the page\r\n        window.location.href = window.location.href;    \r\n    } else {\r\n        // reset the button\r\n        spinningBtn.reset();\r\n\r\n        Utilities.displayAlert('Error. Response not saved.');\r\n    }\r\n}\r\n\r\n\r\n/************************************************\r\nSet the active status filter dropdown.\r\n*************************************************/\r\nfunction setActiveStatusDropdownOption() {\r\n    const urlStatusParmValue = UrlParser.getQueryParm('status');\r\n\r\n    // use pending if no status filter is set in the url\r\n    const statusFilter = urlStatusParmValue != null ? urlStatusParmValue : STATUS_FILTERS.Pending;\r\n\r\n    // select the active dropdown item\r\n    const eActiveDropdownItem = $(eStatusDropdown).find(`.dropdown-item[data-status='${statusFilter}']`);\r\n    $(eActiveDropdownItem).addClass('active');    \r\n}\r\n"],"names":[],"mappings":"yBACA,MAAM,eAAe,GAAG,uBAAsB;AAC9C,MAAM,oBAAoB,GAAG,kBAAkB,CAAC;AAChD,MAAM,eAAe,GAAG,kBAAkB,CAAC;AAC3C;AACA,MAAM,cAAc,GAAG;AACvB,IAAI,GAAG,EAAE,KAAK;AACd,IAAI,QAAQ,EAAE,UAAU;AACxB,IAAI,MAAM,EAAE,QAAQ;AACpB,IAAI,OAAO,EAAE,SAAS;AACtB,IAAI,OAAO,EAAE,SAAS;AACtB,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,WAAW;AAC7B,IAAI,CAAC,CAAC,iCAAiC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAC5D,IAAI,6BAA6B,EAAE,CAAC;AACpC,IAAI,iBAAiB,EAAE,CAAC;AACxB,CAAC,CAAC,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,iBAAiB,GAAG;AAC7B,IAAI,CAAC,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,WAAW;AAC9C,QAAQ,mBAAmB,CAAC,IAAI,CAAC,CAAC;AAClC,KAAK,CAAC,CAAC;AACP,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,eAAe,mBAAmB,CAAC,qBAAqB,EAAE;AAC1D;AACA;AACA,IAAI,MAAM,YAAY,GAAG,CAAC,CAAC,qBAAqB,CAAC,CAAC,IAAI,EAAE,CAAC;AACzD,IAAI,MAAM,WAAW,GAAG,IAAI,aAAa,CAAC,qBAAqB,EAAE,YAAY,CAAC,CAAC;AAC/E,IAAI,WAAW,CAAC,WAAW,EAAE,CAAC;AAC9B;AACA;AACA,IAAI,MAAM,SAAS,GAAG,CAAC,CAAC,qBAAqB,CAAC,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;AACrG,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACtE,IAAI,IAAI,WAAW,GAAG,UAAU,CAAC,iCAAiC,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;AACtF,IAAI,WAAW,GAAG,MAAM,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;AACrD;AACA;AACA,IAAI,IAAI,WAAW,CAAC,EAAE,EAAE;AACxB;AACA,QAAQ,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AACpD,KAAK,MAAM;AACX;AACA,QAAQ,WAAW,CAAC,KAAK,EAAE,CAAC;AAC5B;AACA,QAAQ,SAAS,CAAC,YAAY,CAAC,4BAA4B,CAAC,CAAC;AAC7D,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,SAAS,6BAA6B,GAAG;AACzC,IAAI,MAAM,kBAAkB,GAAG,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;AAChE;AACA;AACA,IAAI,MAAM,YAAY,GAAG,kBAAkB,IAAI,IAAI,GAAG,kBAAkB,GAAG,cAAc,CAAC,OAAO,CAAC;AAClG;AACA;AACA,IAAI,MAAM,mBAAmB,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,CAAC,4BAA4B,EAAE,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC;AACzG,IAAI,CAAC,CAAC,mBAAmB,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAC9C"}