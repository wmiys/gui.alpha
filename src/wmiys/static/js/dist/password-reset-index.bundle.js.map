{"version":3,"file":"password-reset-index.bundle.js","sources":["../pages/password-reset/index.js"],"sourcesContent":["\r\nconst ePasswordResetForm = {\r\n    form: '.password-reset-form',\r\n    inputClasses: '.password-reset-input',\r\n    submitButton: '.password-reset-btn',\r\n    inputs: {\r\n        new: '#password-reset-input-new',\r\n        confirm: '#password-reset-input-confirm',\r\n    },\r\n}\r\n\r\nconst containers = {\r\n    form: '.password-reset-container-form',\r\n    success: '.password-reset-container-success',\r\n}\r\n\r\nconst mErrorMessages = {\r\n    required: 'Required',\r\n    noMatch: 'Passwords do not match',\r\n}\r\n\r\nconst mSpinnerButton = new SpinnerButton(ePasswordResetForm.submitButton, $(ePasswordResetForm.submitButton).text());\r\n\r\n// password reset id located in the URL\r\nconst mPasswordResetID = UrlParser.getPathValue(1);\r\n\r\n\r\n\r\n\r\n/**********************************************************\r\nMain logic\r\n**********************************************************/\r\n$(document).ready(function() {\r\n    addEventListeners();\r\n});\r\n\r\n\r\n/**********************************************************\r\nAdd the event listeners to the page\r\n**********************************************************/\r\nfunction addEventListeners() {\r\n    $(ePasswordResetForm.submitButton).on('click', function() {\r\n        resetPassword();\r\n    });\r\n\r\n    $(ePasswordResetForm.inputClasses).on('keydown', function() {\r\n        removeInvalidFeedback(this);\r\n    });\r\n\r\n    // user hits enter while an text input is active\r\n    $(ePasswordResetForm.inputClasses).on('keypress', function(e) {\r\n        if (e.keyCode == 13) {\r\n            e.preventDefault();\r\n            resetPassword();\r\n        }\r\n    });\r\n}\r\n\r\n\r\n/**********************************************************\r\nAttempt to reset the user's password\r\n**********************************************************/\r\nasync function resetPassword() {\r\n    mSpinnerButton.showSpinner();\r\n    \r\n    if (!validateForm()) {\r\n        mSpinnerButton.reset();\r\n        return;\r\n    }\r\n\r\n    const newPassword = $(ePasswordResetForm.inputs.new).val();\r\n    \r\n    let apiResponse = await ApiWrapper.requestPutPasswordReset(mPasswordResetID, newPassword);\r\n\r\n    if (apiResponse.ok) {\r\n        toggleContainers();\r\n    } \r\n    else {\r\n        mSpinnerButton.reset();\r\n        \r\n        const alertTop = new AlertTop(ALERT_TOP_TYPES.DANGER, 'Something went wrong! Password was not updated.');\r\n        alertTop.show();\r\n    }\r\n}\r\n\r\n\r\nfunction toggleContainers() {\r\n    $('.container').toggleClass('d-none');\r\n}\r\n\r\n\r\n\r\n/**********************************************************\r\nMake sure the form is valid before sending the update request\r\n**********************************************************/\r\nfunction validateForm() {\r\n\r\n    if (!inputsHaveValues()) {\r\n        return false;\r\n    } \r\n    else if (!inputValuesMatch()) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\n/**********************************************************\r\nChecks if both inputs have a value.\r\n\r\nReturns a bool:\r\n    true: both inputs have a value\r\n    false: an input is empty\r\n**********************************************************/\r\nfunction inputsHaveValues() {\r\n    // new\r\n    const inputValueNew = $(ePasswordResetForm.inputs.new).val();\r\n    if (inputValueNew.length < 1) {\r\n        displayInvalidFeedback(ePasswordResetForm.inputs.new, mErrorMessages.required);\r\n        return false;\r\n    }\r\n\r\n    // confirm\r\n    const inputValueConfirm = $(ePasswordResetForm.inputs.confirm).val();\r\n    if (inputValueConfirm.length < 1) {\r\n        displayInvalidFeedback(ePasswordResetForm.inputs.confirm, mErrorMessages.required);\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/**********************************************************\r\nChecks if both input values match.\r\n\r\nReturns a bool:\r\n    true: inputs match\r\n    false: inputs do not match\r\n**********************************************************/\r\nfunction inputValuesMatch() {\r\n    const inputValueNew = $(ePasswordResetForm.inputs.new).val();\r\n    const inputValueConfirm = $(ePasswordResetForm.inputs.confirm).val();\r\n\r\n    if (inputValueNew == inputValueConfirm) {\r\n        return true;\r\n    } else {\r\n        displayInvalidFeedback(ePasswordResetForm.inputs.confirm, mErrorMessages.noMatch);\r\n        return false;\r\n    }\r\n}\r\n\r\n\r\n/**********************************************************\r\nDisplay an invalid feedback message on the screen.\r\n\r\nInputs:\r\n    invalidInput: input element that is invalid\r\n    message: message to be displayed\r\n**********************************************************/\r\nfunction displayInvalidFeedback(invalidInput, message) {\r\n    $(invalidInput).addClass('is-invalid').closest('.form-group').find('.invalid-feedback').text(message);\r\n}\r\n\r\n/**********************************************************\r\nRemove an invalid feedback message display.\r\n\r\nParms:\r\n    invalidInput: the input whose invalid feedback needs to be removed\r\n**********************************************************/\r\nfunction removeInvalidFeedback(invalidInput) {\r\n    $(invalidInput).removeClass('is-invalid');\r\n}"],"names":[],"mappings":"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"}