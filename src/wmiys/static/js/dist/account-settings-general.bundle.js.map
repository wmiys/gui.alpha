{"version":3,"file":"account-settings-general.bundle.js","sources":["../pages/account-settings/general.js"],"sourcesContent":["/************************************************\r\nThis object represents the General Information form.\r\nIt includes all of its inputs and buttons.\r\n*************************************************/\r\nconst eFormBasic = {\r\n    form: $('.form-account-settings-basic'),\r\n\r\n    inputs: {\r\n        nameFirst: '#form-account-settings-basic-name-first',\r\n        nameLast : '#form-account-settings-basic-name-last',\r\n        email    : '#form-account-settings-basic-email',\r\n        dob :      '#form-account-settings-basic-dob',\r\n    },\r\n\r\n    buttons: {\r\n        submit: '#form-account-settings-basic-submit',\r\n    },\r\n\r\n    inputClassIdentifier: '.form-account-settings-basic-input',\r\n\r\n    getValues: function() {\r\n        const values = {};\r\n\r\n        for (inputKey of Object.keys(eFormBasic.inputs)) {\r\n            values[inputKey] = $(eFormBasic.inputs[inputKey]).val();\r\n        }\r\n\r\n        return values;\r\n    },\r\n}\r\n\r\n// button to update their password\r\nconst eBtnUpdatePassword = '#btn-update-password';\r\n\r\n\r\nconst eSideNav = {\r\n    container: $('.card-account-settings-sidenav'),\r\n\r\n    profileSection: {\r\n        picture: $('.img-profile-pic'),\r\n        nameFirst: $('.profile-info-name-first'),\r\n        nameLast: $('.profile-info-name-last'),\r\n    }\r\n}\r\n\r\n/************************************************\r\nRepresents the alert display section.\r\n*************************************************/\r\nconst eAlertDisplay = {\r\n    alert: '.alert-top',\r\n    close: '.btn-close-alert',\r\n}\r\n\r\n/************************************************\r\nMain logic\r\n*************************************************/\r\n$(document).ready(function() {\r\n    addEventListeners();\r\n    activateSidelink();\r\n});\r\n\r\n/************************************************\r\nRegisters all of the page event listeners.\r\n*************************************************/\r\nfunction addEventListeners() {\r\n\r\n    $(eFormBasic.buttons.submit).on('click', function() {\r\n        updateUserInfo();\r\n    });\r\n\r\n    // hide the alert display\r\n    $(eAlertDisplay.close).on('click', function() {\r\n        $(this).closest('.alert').prop('hidden', true);\r\n    });\r\n\r\n    // update password\r\n    $(eBtnUpdatePassword).on('click', function() {\r\n        updatePassword();\r\n    });\r\n}\r\n\r\n\r\nfunction activateSidelink() {\r\n    $('#v-pills-general-tab').addClass('active');\r\n}\r\n\r\n\r\n/************************************************\r\nSends an update request to the api\r\n*************************************************/\r\nfunction updateUserInfo() {\r\n    disableSaveButton();\r\n\r\n    const values = eFormBasic.getValues();\r\n\r\n    const formattedData = {\r\n        email: values.email,\r\n        name_first: values.nameFirst,\r\n        name_last: values.nameLast,\r\n        birth_date: values.dob,\r\n    }\r\n\r\n    ApiWrapper.requestPutUser(formattedData, updateUserInfoSuccess, updateUserInfoError);\r\n}\r\n\r\n/************************************************\r\nCallback for a successful api request to update the user info\r\n*************************************************/\r\nfunction updateUserInfoSuccess(result,status,xhr) {\r\n    enableSaveButton();\r\n    displayAlert('Updated successfully.', 'success');\r\n}\r\n\r\n\r\n/************************************************\r\nCallback for an unsuccessful api request to update the user info\r\n*************************************************/\r\nfunction updateUserInfoError(xhr, status, error) {\r\n    enableSaveButton();\r\n    console.error('updateUserInfoError');\r\n    console.error(xhr);\r\n    console.error(status);\r\n    console.error(error);\r\n}\r\n\r\n/************************************************\r\nDisabled the save changes button\r\n*************************************************/\r\nfunction disableSaveButton() {\r\n    const initWidth = $(eFormBasic.buttons.submit).width();\r\n    $(eFormBasic.buttons.submit).prop('disabled', true).width(initWidth);\r\n}\r\n\r\n/************************************************\r\nEnables the save changes button\r\n*************************************************/\r\nfunction enableSaveButton() {\r\n    const initWidth = $(eFormBasic.buttons.submit).width();\r\n    $(eFormBasic.buttons.submit).width(initWidth).prop('disabled', false);\r\n}\r\n\r\n/************************************************\r\nDisplays an alert on the screen\r\n*************************************************/\r\nfunction displayAlert(message='Success', alertType='success') {\r\n    const alertClass = `alert-${alertType}`;\r\n    $(eAlertDisplay.alert).prop('hidden', false).addClass(alertClass).find('.message').html(message);\r\n}\r\n\r\n\r\n/************************************************\r\nSend a request to update a user's password\r\n*************************************************/\r\nasync function updatePassword() {\r\n    // disable the spinner button\r\n    const buttonText = $(eBtnUpdatePassword).text();\r\n    const spinnerBtn = new SpinnerButton(eBtnUpdatePassword, buttonText);\r\n    spinnerBtn.showSpinner();\r\n    \r\n    // get the user's email\r\n    const userData = await (await ApiWrapper.requestGetUser()).json();\r\n    const email = userData.email;\r\n\r\n    // tell the api that they want to update their password\r\n    const apiResponse = await (await ApiWrapper.requestPostPasswordReset(email)).json();\r\n\r\n    // redirect the user to the password reset page\r\n    window.location.href = `/password-reset/${apiResponse.id}`;\r\n\r\n    // spinnerBtn.reset();\r\n}\r\n"],"names":[],"mappings":"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"}